---
title: 'Local Development'
description: 'Set up your development environment for LeadDesk 5'
---

## Prerequisites

<Info>
  Before getting started, ensure you have:
  - Node.js version 19 or higher
  - Git installed
  - Access to Supabase project credentials
  - n8n instance (for workflow testing)
</Info>

## Environment Setup

<Steps>
<Step title="Clone the Repository">

```bash
git clone https://github.com/zyris/leaddesk5.git
cd leaddesk5
```
</Step>

<Step title="Install Dependencies">

```bash
npm install
```
</Step>

<Step title="Configure Environment Variables">

Create a `.env.local` file in the root directory:

```bash
# Supabase
NEXT_PUBLIC_SUPABASE_URL=your-supabase-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# n8n
N8N_DISPATCHER_WEBHOOK=https://your-n8n-instance.com/webhook/dispatcher

# App
NEXT_PUBLIC_APP_URL=http://localhost:3000
```
</Step>

<Step title="Set Up Database">

Run the Supabase migrations:

```bash
npx supabase db push
```

This will create:
- `enrichment_jobs` table
- `job_practices` table
- RLS policies
- Database triggers
- Indexes
</Step>

<Step title="Start Development Server">

```bash
npm run dev
```

Your app will be available at `http://localhost:3000`
</Step>
</Steps>

## Database Management

### Local Supabase

For a fully local development environment:

```bash
npx supabase start
```

This starts local Postgres, Studio, and APIs.

### Migrations

Create a new migration:

```bash
npx supabase migration new migration_name
```

Apply migrations:

```bash
npx supabase db push
```

## Testing Workflows

### n8n Setup

1. Deploy the dispatcher workflow
2. Deploy worker workflows (URL, Scraper, Aggregator)
3. Update webhook URLs in `.env.local`

### Testing Jobs

```bash
# Upload test CSV
curl -X POST http://localhost:3000/api/jobs \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -F "file=@test-practices.csv"
```

## Development Tools

### Supabase Studio

Access at `http://localhost:54323` (if using local Supabase) to:
- View table data
- Test RLS policies
- Monitor real-time changes
- Execute SQL queries

### API Testing

Use the provided Postman collection or test with curl:

```bash
# List jobs
curl http://localhost:3000/api/jobs \
  -H "Authorization: Bearer YOUR_TOKEN"

# Get job details
curl http://localhost:3000/api/jobs/{job_id} \
  -H "Authorization: Bearer YOUR_TOKEN"
```

## Code Formatting

We use ESLint and Prettier for code formatting:

```bash
npm run lint
npm run format
```

### VSCode Extensions

Recommended extensions:
- [MDX](https://marketplace.visualstudio.com/items?itemName=unifiedjs.vscode-mdx) - MDX syntax highlighting
- [Prettier](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode) - Code formatting
- [ESLint](https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint) - Linting

## Documentation Development

To preview these docs locally:

<Steps>
<Step title="Install Mintlify CLI">

```bash
npm i -g mint
```
</Step>

<Step title="Navigate to Docs Directory">

```bash
cd LeadDeskDocs
```
</Step>

<Step title="Start Preview Server">

```bash
mint dev
```

Documentation will be available at `http://localhost:3000`
</Step>
</Steps>

## Troubleshooting

<AccordionGroup>
  <Accordion title="Database Connection Errors">
    Verify your Supabase credentials in `.env.local` and ensure the project is active.
  </Accordion>

  <Accordion title="n8n Webhook Not Triggering">
    Check that:
    - n8n workflows are active
    - Webhook URLs are correct
    - n8n instance is accessible from your dev environment
  </Accordion>

  <Accordion title="Authentication Issues">
    Ensure you're using a valid Supabase JWT token and RLS policies are properly configured.
  </Accordion>

  <Accordion title="Port Already in Use">
    Change the dev port: `npm run dev -- -p 3001`
  </Accordion>
</AccordionGroup>

## Next Steps

<CardGroup cols={2}>

<Card title="Frontend Architecture" icon="browser" href="/architecture/frontend-architecture">
  Understand the Next.js structure
</Card>

<Card title="Backend Architecture" icon="server" href="/architecture/backend-architecture">
  Explore API route implementation
</Card>

<Card title="Database Schema" icon="database" href="/architecture/database-schema">
  Learn the data model
</Card>

<Card title="API Reference" icon="code" href="/api-reference/introduction">
  Test API endpoints
</Card>

</CardGroup>
